#N canvas 539 250 726 517 10;
#X obj 92 41 inlet midi_note;
#X obj 174 129 inlet width;
#X obj 207 215 inlet decay;
#X obj 286 216 inlet cutoff;
#X obj 93 325 outlet~;
#N canvas 353 578 194 221 excitation~ 0;
#X obj 31 18 inlet midi_note;
#X obj 101 39 inlet width;
#X obj 30 120 vline~;
#X obj 100 123 noise~;
#X obj 30 154 *~;
#X obj 30 181 outlet~;
#X obj 30 44 bang;
#X obj 74 69 del 5;
#X msg 30 87 1 1;
#X msg 74 90 0 1;
#X connect 0 0 6 0;
#X connect 1 0 7 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X restore 93 153 pd excitation~;
#N canvas 95 243 669 524 body~ 1;
#X obj 75 342 inlet~;
#X obj 221 384 outlet~;
#X obj 246 118 block~ 1;
#X obj 75 380 delwrite~ \$0-dl 1000;
#X obj 99 241 delread~ \$0-dl 12;
#X obj 221 289 lop~ 4000;
#X obj 221 336 *~ 0.99;
#X obj 99 88 mtof;
#X obj 99 118 t b f;
#X obj 99 179 /;
#X msg 92 153 1;
#X obj 99 209 * 1000;
#X obj 99 55 inlet midi_note;
#X obj 260 312 inlet decay;
#X obj 272 264 inlet cutoff;
#X text 245 75 Block size needs to be 1 sample for this subpatch to
ensure correct tuning and operation for delay line feedback;
#X text 151 180 Convert a midi note into the required delay line length
(in ms) to generate said pitch.;
#X connect 0 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 1 9 1;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 11 0 4 0;
#X connect 12 0 7 0;
#X connect 13 0 6 1;
#X connect 14 0 5 1;
#X restore 93 275 pd body~;
#X obj 92 65 s \$0-midi_note;
#X obj 93 110 r \$0-midi_note;
#X obj 108 201 r \$0-midi_note;
#X text 185 151 excitation generates a short noise burst the specied
width;
#X text 152 275 body filters the excitation noise in a pitch specific
delay line;
#X connect 0 0 7 0;
#X connect 1 0 5 1;
#X connect 2 0 6 2;
#X connect 3 0 6 3;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 8 0 5 0;
#X connect 9 0 6 1;
#X coords 0 0 1 1 200 100 0;
