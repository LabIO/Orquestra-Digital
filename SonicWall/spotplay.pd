#N canvas 506 166 602 495 10;
#N canvas 351 546 194 221 excitation~ 0;
#X obj 31 18 inlet midi_note;
#X obj 101 39 inlet width;
#X obj 30 120 vline~;
#X obj 100 123 noise~;
#X obj 30 154 *~;
#X obj 30 181 outlet~;
#X obj 30 44 bang;
#X obj 74 69 del 5;
#X msg 30 87 1 1;
#X msg 74 90 0 1;
#X connect 0 0 6 0;
#X connect 1 0 7 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 9 0;
#X connect 8 0 2 0;
#X connect 9 0 2 0;
#X restore 93 195 pd excitation~;
#N canvas 93 243 669 524 body~ 0;
#X obj 75 342 inlet~;
#X obj 221 384 outlet~;
#X obj 246 118 block~ 1;
#X obj 75 380 delwrite~ \$0-dl 1000;
#X obj 99 241 delread~ \$0-dl 12;
#X obj 221 289 lop~ 4000;
#X obj 221 336 *~ 0.99;
#X obj 99 88 mtof;
#X obj 99 118 t b f;
#X obj 99 179 /;
#X msg 92 153 1;
#X obj 99 209 * 1000;
#X obj 99 55 inlet midi_note;
#X obj 260 312 inlet decay;
#X obj 272 264 inlet cutoff;
#X text 245 75 Block size needs to be 1 sample for this subpatch to
ensure correct tuning and operation for delay line feedback;
#X text 151 180 Convert a midi note into the required delay line length
(in ms) to generate said pitch.;
#X connect 0 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 1 9 1;
#X connect 9 0 11 0;
#X connect 10 0 9 0;
#X connect 11 0 4 0;
#X connect 12 0 7 0;
#X connect 13 0 6 1;
#X connect 14 0 5 1;
#X restore 93 317 pd body~;
#X obj 92 107 s \$0-midi_note;
#X obj 93 152 r \$0-midi_note;
#X obj 108 243 r \$0-midi_note;
#X text 185 193 excitation generates a short noise burst the specied
width;
#X text 152 317 body filters the excitation noise in a pitch specific
delay line;
#X obj 92 13 r play-\$1;
#X obj 187 14 r stop-play-\$1;
#X obj 82 62 \$2;
#X text 109 65 nota midi;
#X obj 205 44 s stop-\$0;
#X obj 196 154 r width;
#X obj 141 275 r decay;
#X obj 202 276 r cutoff;
#X obj 91 432 throw~ somOut;
#X obj 111 39 onebang;
#X connect 0 0 1 0;
#X connect 1 0 15 0;
#X connect 3 0 0 0;
#X connect 4 0 1 1;
#X connect 7 0 16 0;
#X connect 8 0 11 0;
#X connect 8 0 16 1;
#X connect 9 0 2 0;
#X connect 12 0 0 1;
#X connect 13 0 1 2;
#X connect 14 0 1 3;
#X connect 16 0 9 0;
